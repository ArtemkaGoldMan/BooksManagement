@page "/books/edit/{BookId:int?}"
@inject HttpClient Http
@inject NavigationManager Navigation
@using BaseLibrary.Entities

@code {
    [Parameter]
    public int? BookId { get; set; }

    private Book Book = new();

    protected override async Task OnInitializedAsync()
    {
        if (BookId.HasValue)
        {
            Book = await Http.GetFromJsonAsync<Book>($"api/Books/{BookId}");
        }
    }

    private async Task SaveBook()
    {
        if (BookId.HasValue)
        {
            await Http.PutAsJsonAsync($"api/Books/{BookId}", Book);
        }
        else
        {
            await Http.PostAsJsonAsync("api/Books", Book);
        }
    }

    private async Task Cancel()
    {
        Navigation.NavigateTo("/books");
    }
}

<form>
    <div>
        <label>Title:</label>
        <input @bind="Book.Title" />
    </div>
    <div>
        <label>Author:</label>
        <input @bind="Book.Author" />
    </div>
    <div>
        <label>Genre:</label>
        <input @bind="Book.Genre" />
    </div>
    <div>
        <label>Price:</label>
        <input type="number" @bind="Book.Price" />
    </div>
    <button @onclick="SaveBook">Save</button>
    <button @onclick="Cancel">Cancel</button>
</form>
